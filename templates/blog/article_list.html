{% extends 'base.html' %}
{% load static %}
{% load blog_tags %}
{% load comment_tags %}
{% block content %}
    <!-- content srart -->
    <div class="am-g am-g-fixed blog-fixed">
        <div class="am-u-md-8 am-u-sm-12">
            {% for article in article_list %}
                <article class="am-g blog-entry-article">
                    <header>
                        <span class="am-article-title"><a href="{{ article.get_absolute_url }}">{{ article.title }}</a></span>
                        <div class="am-article-meta">
                            <span>
                                <a href="{{ article.category.get_absolute_url }}"
                                   class="blog-color">{{ article.category.name }} &nbsp;</a>
                            </span>
                            <span> @{{ article.author }} &nbsp;</span>
                            <span> 阅读({{ article.views }}) &nbsp;</span>
                            {% get_comment_count article as comment_count %}
                            <span> 评论({{ comment_count }}) &nbsp;</span>
                            <span>{{ article.pub_time|date:'Y/m/d' }} &nbsp; </span>
                            <span class="am-icon-tags"> &nbsp;
                                {% for tag in article.tags.all %}
                                    <a href="{{ tag.get_absolute_url }}">#{{ tag.name }}</a>&nbsp;
                                {% endfor %}
                            </span>
                        </div>
                    </header>
                    <hr>
                    <div class="am-article-bd am-container" style="padding-left: 0px">
                        {% if article.image_link %}
                            <div class="am-u-md-4 blog-entry-img">
                                <img src="{{ article.image_link }}" alt="" class="am-u-sm-12">
                            </div>
                            <div class="am-u-md-8 blog-entry-text">
                                <p>
                                    {{ article.summary|markdown_to_html|safe }}
                            </div>
                        {% else %}
                            <div class="blog-entry-text">
                                <p>
                                    {{ article.summary|markdown_to_html|safe }}
                            </div>
                        {% endif %}
                    </div>
                    <div class="" style="padding-right: 10px; float: right">
                        <a href="{{ article.get_absolute_url }}">Read More</a>
                    </div>
                </article>
            {% endfor %}
        {% if is_paginated %}
            <ul class="am-pagination">
                {% if page_obj.has_previous %}
                <li class="am-pagination-prev"><a href="?page={{ page_obj.previous_page_number }}">&laquo; Prev</a></li>
                {% endif %}
                {% if page_obj.has_next %}
                <li class="am-pagination-next"><a href="?page={{ page_obj.next_page_number }}">Next &raquo;</a></li>
                {% endif %}
            </ul>
        {% endif %}
        </div>

        {% include 'blog/side_bar.html' %}

    </div>
{% endblock %}
<!-- content end -->
